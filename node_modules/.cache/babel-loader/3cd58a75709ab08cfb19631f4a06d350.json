{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Desktop\\\\GraduationProject\\\\queen-party-fe\\\\src\\\\pages\\\\Product\\\\AddProduct.js\";\nimport React, { Component } from 'react';\nimport Header from '../../components/Header/Header';\nimport Footer from '../../components/Footer/Footer';\nimport SideBar from '../../components/SideBar/SideBar';\nimport axios from 'axios';\nimport { storage } from '../../firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass AddProduct extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      if (e.target.files[0]) {\n        const image = e.target.files[0];\n        this.setState(() => ({\n          image\n        }));\n      }\n\n      let nam = e.target.name;\n      let val = e.target.value;\n      this.setState({\n        [nam]: val\n      });\n    };\n\n    this.handleUpload = event => {\n      event.preventDefault();\n      const {\n        image\n      } = this.state;\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      uploadTask.on('state_changed', snapshot => {\n        // progrss function ....\n        const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n        this.setState({\n          progress\n        });\n      }, error => {\n        // error function ....\n        console.log(error);\n      }, () => {\n        // complete function ....\n        storage.ref('images').child(image.name).getDownloadURL().then(url => {\n          console.log(url);\n          this.setState({\n            url\n          });\n        });\n      });\n      let product = {\n        name: this.state.name,\n        picture: this.state.url,\n        price: this.state.price,\n        discount: this.state.discount,\n        description: this.state.description,\n        service_category_id: this.state.service_category_id,\n        vendor_id: this.state.vendor_id\n      };\n      axios.post('http://127.0.0.1:8000/api/admin_product/', product).then(res => {\n        alert(\"Thêm sản phẩm thành công!\");\n        console.log(res);\n        this.props.history.push(\"/product\");\n      }).catch(error => {\n        alert(\"Vui lòng điền thông tin!\");\n        console.log(error);\n        console.log(product);\n      });\n    };\n\n    this.state = {\n      name: \"\",\n      price: \"\",\n      discount: \"\",\n      description: \"\",\n      service_category_id: 1,\n      vendor_id: 1,\n      image: null,\n      url: '',\n      progress: 0\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleUpload = this.handleUpload.bind(this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"progress\", {\n        value: this.state.progress,\n        max: \"100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        name: \"picture\",\n        onChange: this.handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.handleUpload,\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: this.state.url || 'http://via.placeholder.com/400x300',\n        alt: \"Uploaded images\",\n        height: \"300\",\n        width: \"400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default AddProduct;","map":{"version":3,"sources":["C:/Users/DELL/Desktop/GraduationProject/queen-party-fe/src/pages/Product/AddProduct.js"],"names":["React","Component","Header","Footer","SideBar","axios","storage","AddProduct","constructor","props","handleChange","e","target","files","image","setState","nam","name","val","value","handleUpload","event","preventDefault","state","uploadTask","ref","put","on","snapshot","progress","Math","round","bytesTransferred","totalBytes","error","console","log","child","getDownloadURL","then","url","product","picture","price","discount","description","service_category_id","vendor_id","post","res","alert","history","push","catch","bind","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Header from '../../components/Header/Header';\r\nimport Footer from '../../components/Footer/Footer';\r\nimport SideBar from '../../components/SideBar/SideBar';\r\nimport axios from 'axios';\r\nimport {storage} from '../../firebase';\r\n\r\nclass AddProduct extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n        name: \"\",\r\n        price: \"\",\r\n        discount:\"\",\r\n        description:\"\",\r\n        service_category_id:1,\r\n        vendor_id: 1,\r\n        image: null,\r\n        url: '',\r\n        progress: 0\r\n    }\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleUpload = this.handleUpload.bind(this);\r\n  }\r\n  handleChange = e => {\r\n    if (e.target.files[0]) {\r\n      const image = e.target.files[0];\r\n      this.setState(() => ({image}));\r\n    }\r\n    let nam = e.target.name;\r\n    let val = e.target.value;\r\n    this.setState({ [nam]: val });\r\n  }\r\n  handleUpload = (event) => {\r\n        event.preventDefault();\r\n        const {image} = this.state;\r\n        const uploadTask = storage.ref(`images/${image.name}`).put(image);\r\n        uploadTask.on('state_changed', \r\n        (snapshot) => {\r\n            // progrss function ....\r\n            const progress = Math.round((snapshot.bytesTransferred / snapshot.totalBytes) * 100);\r\n            this.setState({progress});\r\n        }, \r\n        (error) => {\r\n            // error function ....\r\n            console.log(error);\r\n        }, \r\n        () => {\r\n        // complete function ....\r\n        storage.ref('images').child(image.name).getDownloadURL().then(url => {\r\n            console.log(url);\r\n            this.setState({url});\r\n        })\r\n    });\r\n\r\n    let product = {\r\n        name: this.state.name,\r\n        picture: this.state.url,\r\n        price: this.state.price,\r\n        discount: this.state.discount,\r\n        description: this.state.description,\r\n        service_category_id: this.state.service_category_id,\r\n        vendor_id: this.state.vendor_id\r\n    }\r\n\r\n    axios.post('http://127.0.0.1:8000/api/admin_product/',product)\r\n        .then((res) => {\r\n            alert(\"Thêm sản phẩm thành công!\");\r\n            console.log(res);\r\n            \r\n            this.props.history.push(\"/product\");\r\n        }).catch((error) => {\r\n            alert(\"Vui lòng điền thông tin!\");\r\n            console.log(error);\r\n            console.log(product);\r\n        })\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n      <progress value={this.state.progress} max=\"100\"/>\r\n      <br/>\r\n        <input type=\"file\" name= \"picture\" onChange={this.handleChange}/>\r\n        <button onClick={this.handleUpload}>Upload</button>\r\n        <br/>\r\n        <img src={this.state.url || 'http://via.placeholder.com/400x300'} alt=\"Uploaded images\" height=\"300\" width=\"400\"/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default AddProduct;"]},"metadata":{},"sourceType":"module"}