{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Desktop\\\\GraduationProject\\\\queen-party-fe\\\\src\\\\pages\\\\Product\\\\AddProduct.js\";\nimport React, { Component } from 'react';\nimport { storage } from '../../firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass AddProduct extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      let nam = e.target.name;\n      let val = e.target.value;\n\n      if (nam === \"img\") {\n        val = e.target.files[0];\n      }\n\n      this.setState({\n        [nam]: val\n      });\n    };\n\n    this.handleUpload = () => {\n      const {\n        image\n      } = this.state;\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      uploadTask.on('state_changed', snapshot => {\n        // progrss function ....\n        const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n        this.setState({\n          progress\n        });\n      }, error => {\n        // error function ....\n        console.log(error);\n      }, () => {\n        // complete function ....\n        storage.ref('images').child(image.name).getDownloadURL().then(url => {\n          console.log(url);\n          this.setState({\n            url\n          });\n        });\n      });\n    };\n\n    this.state = {\n      image: null,\n      url: '',\n      progress: 0\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleUpload = this.handleUpload.bind(this);\n  }\n\n  render() {\n    const style = {\n      height: '100vh',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center'\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: style,\n      children: [/*#__PURE__*/_jsxDEV(\"progress\", {\n        value: this.state.progress,\n        max: \"100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: this.handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.handleUpload,\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: this.state.url || 'http://via.placeholder.com/400x300',\n        alt: \"Uploaded images\",\n        height: \"300\",\n        width: \"400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default AddProduct;","map":{"version":3,"sources":["C:/Users/DELL/Desktop/GraduationProject/queen-party-fe/src/pages/Product/AddProduct.js"],"names":["React","Component","storage","AddProduct","constructor","props","handleChange","e","nam","target","name","val","value","files","setState","handleUpload","image","state","uploadTask","ref","put","on","snapshot","progress","Math","round","bytesTransferred","totalBytes","error","console","log","child","getDownloadURL","then","url","bind","render","style","height","display","flexDirection","alignItems","justifyContent"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {storage} from '../../firebase';\r\n\r\nclass AddProduct extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      image: null,\r\n      url: '',\r\n      progress: 0\r\n    }\r\n    this.handleChange = this\r\n      .handleChange\r\n      .bind(this);\r\n      this.handleUpload = this.handleUpload.bind(this);\r\n  }\r\n  handleChange = e => {\r\n    let nam = e.target.name;\r\n        let val = e.target.value;\r\n        if (nam === \"img\") {\r\n            val = e.target.files[0];\r\n        }\r\n        this.setState({ [nam]: val });\r\n  }\r\n  handleUpload = () => {\r\n      const {image} = this.state;\r\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\r\n      uploadTask.on('state_changed', \r\n      (snapshot) => {\r\n        // progrss function ....\r\n        const progress = Math.round((snapshot.bytesTransferred / snapshot.totalBytes) * 100);\r\n        this.setState({progress});\r\n      }, \r\n      (error) => {\r\n           // error function ....\r\n        console.log(error);\r\n      }, \r\n    () => {\r\n        // complete function ....\r\n        storage.ref('images').child(image.name).getDownloadURL().then(url => {\r\n            console.log(url);\r\n            this.setState({url});\r\n        })\r\n    });\r\n  }\r\n  render() {\r\n    const style = {\r\n      height: '100vh',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      justifyContent: 'center'\r\n    };\r\n    return (\r\n      <div style={style}>\r\n      <progress value={this.state.progress} max=\"100\"/>\r\n      <br/>\r\n        <input type=\"file\" onChange={this.handleChange}/>\r\n        <button onClick={this.handleUpload}>Upload</button>\r\n        <br/>\r\n        <img src={this.state.url || 'http://via.placeholder.com/400x300'} alt=\"Uploaded images\" height=\"300\" width=\"400\"/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default AddProduct;"]},"metadata":{},"sourceType":"module"}